(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{560:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout/[id]",function(){return c(473)}])},473:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSG":function(){return x},default:function(){return y}});var d=c(7568),e=c(1799),f=c(4051),g=c.n(f),h=c(5893),i=c(7294),j=c(7536),k=c(5770),l=c(5568),m=c(5582),n=c(629),o=c(3965),p=c(5861),q=c(3321),r=c(6310),s=c(7533),t=c(1163),u=c(6154),v=r.Ry().shape({name:r.Z_().required("Name is required"),lastName:r.Z_().required("Last Name is required"),email:r.Z_().email("Email inv\xe1lido").required("Email is required"),address:r.Z_().required("Address is required"),department:r.Z_(),city:r.Z_().required("City is required"),province:r.Z_().required("Province is required"),zipCode:r.Rx().min(5).required("Zip Code is required"),cardNumber:r.Rx().min(16).required("Card Number is required"),cardName:r.Z_().required("Card Name is required"),expirationDate:r.Z_().required("Expiration Date is required"),securityCode:r.Z_().required("Security Code is required")}),w=(0,i.createContext)({}),x=!0;function y(a){var b,c=(0,i.useState)(!1),f=(c[0],c[1]),r=(0,i.useState)(""),x=(r[0],r[1]),y=(0,t.useRouter)(),z=(0,i.useContext)(w).handleCheckout,A=(b=(0,d.Z)(g().mark(function b(c){var d;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d={customer:{name:c.name,lastname:c.lastName,email:c.email,address:{address1:c.address,address2:c.department,city:c.city,state:c.province,zipCode:c.zipCode}}},console.log(d),alert("Obrigado ".concat(c.name,", voce comprou o quadrinho ").concat(a.title," por ").concat(a.price,"R$ para o endereco ").concat(c.address,", ").concat(c.department," ").concat(c.city,", ").concat(c.province,", ").concat(c.zipCode,".")),b.next=5,u.Z.post("http://localhost:3000/api/checkout",d).then(function(a){z(a.data.data),y.push("/purchase-confirmation")}).catch(function(a){f(!0),x(a.response.data.message)});case 5:case"end":return b.stop()}},b)})),function(a){return b.apply(this,arguments)}),B=(0,j.cI)({resolver:(0,s.X)(v)}),C=B.register,D=B.handleSubmit,E=B.formState.errors;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("main",{children:(0,h.jsxs)("form",{onSubmit:D(A),children:[(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",margin:"auto"},children:[(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("h1",{children:"Personal information"}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Name",variant:"filled",size:"small",sx:{width:300}},C("name"))),(0,h.jsx)("span",{children:E.name&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.name.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Last Name",variant:"filled",size:"small",sx:{width:300}},C("lastName"))),(0,h.jsx)("span",{children:E.lastName&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.lastName.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Email",variant:"filled",size:"small",sx:{width:300}},C("email"))),(0,h.jsx)("span",{children:E.email&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.email.message})}),(0,h.jsx)("br",{}),(0,h.jsx)("h1",{children:"Delivery address"}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Address",variant:"filled",size:"small",sx:{width:300}},C("address"))),(0,h.jsx)("span",{children:E.address&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.address.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Department",variant:"filled",size:"small",sx:{width:300}},C("department"))),(0,h.jsx)("span",{children:E.department&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.department.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"City",variant:"filled",size:"small",sx:{width:300}},C("city"))),(0,h.jsx)("span",{children:E.city&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.city.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Province",variant:"filled",size:"small",sx:{width:300}},C("province"))),(0,h.jsx)("span",{children:E.province&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.province.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Zip Code",variant:"filled",size:"small",sx:{width:300}},C("zipCode"))),(0,h.jsx)("span",{children:E.zipCode&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.zipCode.message})}),(0,h.jsx)("br",{}),(0,h.jsx)("h1",{children:"Payment details"}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Card Number",variant:"filled",size:"small",sx:{width:300}},C("cardNumber"))),(0,h.jsx)("span",{children:E.cardNumber&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.cardNumber.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Card Name",variant:"filled",size:"small",sx:{width:300}},C("cardName"))),(0,h.jsx)("span",{children:E.cardName&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.cardName.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Expiration Date",variant:"filled",size:"small",sx:{width:300}},C("expirationDate"))),(0,h.jsx)("span",{children:E.expirationDate&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.expirationDate.message})}),(0,h.jsx)("br",{}),(0,h.jsx)(k.Z,(0,e.Z)({id:"filled-basic",label:"Security Code",type:"password",variant:"filled",size:"small",sx:{width:300}},C("securityCode"))),(0,h.jsx)("span",{children:E.securityCode&&(0,h.jsx)(l.Z,{sx:{width:300},severity:"error",children:E.securityCode.message})}),(0,h.jsx)("br",{})]}),(0,h.jsx)(m.Z,{maxWidth:"sm",sx:{marginTop:"30px"},children:(0,h.jsxs)(n.Z,{sx:{padding:2,display:"flex",flexDirection:"column",rowGap:2},elevation:3,children:[(0,h.jsx)(o.Z,{component:"img",src:"".concat(a.thumbnail.path,".").concat(a.thumbnail.extension),sx:{width:"350px",margin:"auto"}}),(0,h.jsxs)(p.Z,{fontSize:18,children:[(0,h.jsx)("strong",{children:"T\xedtulo: "})," ",a.title]}),(0,h.jsxs)(p.Z,{fontSize:18,children:[(0,h.jsx)("strong",{children:"Pre\xe7o: $"})," ",a.price]})]})})]}),(0,h.jsx)(q.Z,{variant:"contained",sx:{width:300,marginTop:2},type:"submit",children:"Submit"})]})})})}}},function(a){a.O(0,[926,881,544,448,774,888,179],function(){var b;return a(a.s=560)}),_N_E=a.O()}])